<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Countdown_Timer</title>
<style>
 body {
   font-family: Arial, sans-serif;
   margin: 0;
   padding: 0;
   display: flex;
   justify-content: center;
   align-items: center;
   height: 100vh;
 }
 .container {
   text-align: center;
 }
 input {
   padding: 5px;
   margin-right: 10px;
   width: 100px; /* 缩小输入框长度 */
 }
 button {
   padding: 8px 15px;
   margin: 0 5px;
   cursor: pointer;
 }
 #timerDisplay {
   font-size: 2em; /* 调整字体大小 */
 }
</style>
</head>
<body>
<div class="container">
<input type="number" id="minutesInput" placeholder="Enter minutes">
<button onclick="startTimer()">Start</button>
<button onclick="stopTimer()">Stop</button>
<button onclick="resetTimer()">Reset</button>
<div id="timerDisplay"></div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
  document.getElementById("timerDisplay").textContent = "00:00.000";
});

let timer;
let timeLeft = 0;
let timerRunning = false;
let stoppedOnce = false;

function startTimer() {
  const minutes = parseInt(document.getElementById("minutesInput").value);
  if (!isNaN(minutes) && minutes > 0) {
    if (!timerRunning) {
      if (timeLeft === 0) {
        timeLeft = minutes * 60 * 1000; // Convert minutes to milliseconds
        updateTimerDisplay();
      }
      timerRunning = true;
      stoppedOnce = false;
      timer = setInterval(updateTimer, 10); // Update every 10 milliseconds (0.01 seconds)
    } else {
      clearInterval(timer); // Clear the previous timer
      timer = setInterval(updateTimer, 10); // Start a new timer
    }
  } else {
    alert("Please enter a valid number of minutes.");
  }
}

function updateTimer() {
  if (timeLeft > 0) {
    timeLeft -= 10; // Subtract 10 milliseconds
    updateTimerDisplay();
  } else {
    stopTimer();
    alert("Time's up!");
  }
}

function updateTimerDisplay() {
  const minutes = Math.floor(timeLeft / (60 * 1000));
  const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);
  const milliseconds = Math.floor((timeLeft % 1000));
  document.getElementById("timerDisplay").textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${milliseconds.toString().padStart(3, '0')}`;
}

function stopTimer() {
  clearInterval(timer);
  timerRunning = false;
  stoppedOnce = true;
}

function resetTimer() {
  if (stoppedOnce) {
    const minutes = parseInt(document.getElementById("minutesInput").value);
    if (isNaN(minutes) || minutes <= 0) {
      document.getElementById("timerDisplay").textContent = "";
    } else {
      timeLeft = minutes * 60 * 1000;
      updateTimerDisplay();
    }
  }
}
</script>
</body>
</html>
